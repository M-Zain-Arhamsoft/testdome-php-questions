<?php

function simulate(array $entries) : array
{
    $result = array_slice($entries, 0);
    for ($i = 0; $i < count($entries); $i++) {
        $leftIndex = $i - 3;
        $rightIndex = $i + 4;
            
        if ($leftIndex >= 0 && $entries[$leftIndex] >= $entries[$i]) {
            $result[$i] = 0;
        }
            
        if ($rightIndex < count($entries) && $entries[$rightIndex] >= $entries[$i]) {
            $result[$i] = 0;
        }
    }
    
    return $result;
}

$records = [1, 2, 0, 5, 0, 2, 4, 3, 3, 3];
echo implode(', ', simulate($records));
// Expected output
// 1, 0, 0, 5, 0, 0, 0, 3, 3, 0